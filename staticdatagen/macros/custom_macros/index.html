<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The `custom_macros` module contains all the custom macros used in the project. This module provides several macros for common tasks such as retrieving arguments, extracting options from metadata, rendering layouts, and starting a server."><title>staticdatagen::macros::custom_macros - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="staticdatagen" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (426d17342 2024-12-21)" data-channel="nightly" data-search-js="search-036cda7a.js" data-settings-js="settings-0f613d39.js" ><script src="../../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="icon" href="https://kura.pro/staticdatagen/images/favicon.ico"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../staticdatagen/index.html"><img src="https://kura.pro/staticdatagen/images/logos/staticdatagen.svg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../staticdatagen/index.html"><img src="https://kura.pro/staticdatagen/images/logos/staticdatagen.svg" alt="logo"></a><h2><a href="../../../staticdatagen/index.html">staticdatagen</a><span class="version">0.0.3</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module custom_<wbr>macros</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#macro_get_args-macro" title="`macro_get_args` Macro"><code>macro_get_args</code> Macro</a><ul><li><a href="#usage" title="Usage">Usage</a></li><li><a href="#arguments" title="Arguments">Arguments</a></li><li><a href="#behaviour" title="Behaviour">Behaviour</a></li></ul></li><li><a href="#macro_metadata_option-macro" title="`macro_metadata_option` Macro"><code>macro_metadata_option</code> Macro</a><ul><li><a href="#usage-1" title="Usage">Usage</a></li><li><a href="#arguments-1" title="Arguments">Arguments</a></li><li><a href="#behaviour-1" title="Behaviour">Behaviour</a></li></ul></li><li><a href="#macro_render_layout-macro" title="`macro_render_layout` Macro"><code>macro_render_layout</code> Macro</a><ul><li><a href="#behaviour-2" title="Behaviour:">Behaviour:</a></li><li><a href="#returns" title="Returns:">Returns:</a></li></ul></li><li><a href="#macro_serve-macro" title="`macro_serve` Macro"><code>macro_serve</code> Macro</a><ul><li><a href="#arguments-2" title="Arguments">Arguments</a></li><li><a href="#behaviour-3" title="Behaviour">Behaviour</a></li></ul></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In staticdatagen::<wbr>macros</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../index.html">staticdatagen</a>::<wbr><a href="../index.html">macros</a></span><h1>Module <span>custom_macros</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/staticdatagen/macros/custom_macros.rs.html#5-292">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The <code>custom_macros</code> module contains all the custom macros used in the project.
This module provides several macros for common tasks such as retrieving arguments, extracting options from metadata,
rendering layouts, and starting a server.</p>
<h2 id="macro_get_args-macro"><a class="doc-anchor" href="#macro_get_args-macro">§</a><code>macro_get_args</code> Macro</h2>
<p>Retrieve a named argument from a <code>clap::ArgMatches</code> object.</p>
<h3 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>clap::{Arg, ArgMatches, Command, Error};
<span class="kw">use </span>staticdatagen::macro_get_args;

<span class="kw">fn </span>test() -&gt; <span class="prelude-ty">Result</span>&lt;(), Box&lt;<span class="kw">dyn </span>std::error::Error&gt;&gt; {
    <span class="kw">let </span>matches = Command::new(<span class="string">"test_app"</span>)
        .arg(
            Arg::new(<span class="string">"content"</span>)
                .long(<span class="string">"content"</span>)
                .short(<span class="string">'c'</span>)
                .value_name(<span class="string">"CONTENT"</span>),
        )
        .get_matches_from(<span class="macro">vec!</span>[<span class="string">"test_app"</span>, <span class="string">"--content"</span>, <span class="string">"test_content"</span>]);

    <span class="kw">let </span>content = <span class="macro">macro_get_args!</span>(matches, <span class="string">"content"</span>);
    <span class="macro">println!</span>(<span class="string">"Content: {}"</span>, content);
    <span class="prelude-val">Ok</span>(())
}
test();</code></pre></div>
<h3 id="arguments"><a class="doc-anchor" href="#arguments">§</a>Arguments</h3>
<ul>
<li><code>$matches</code> - A <code>clap::ArgMatches</code> object representing the parsed command-line arguments.</li>
<li><code>$name</code> - A string literal specifying the name of the argument to retrieve.</li>
</ul>
<h3 id="behaviour"><a class="doc-anchor" href="#behaviour">§</a>Behaviour</h3>
<p>The <code>macro_get_args</code> macro retrieves the value of the named argument <code>$name</code> from the <code>$matches</code> object. If the argument is found and its value can be converted to <code>String</code>, the macro returns the value as a <code>Result&lt;String, String&gt;</code>. If the argument is not found or its value cannot be converted to <code>String</code>, an <code>Err</code> variant is returned with an error message indicating the omission of the required parameter.</p>
<p>The error message includes the name of the omitted parameter (<code>$name</code>) to assist with troubleshooting and providing meaningful feedback to users.</p>
<h2 id="macro_metadata_option-macro"><a class="doc-anchor" href="#macro_metadata_option-macro">§</a><code>macro_metadata_option</code> Macro</h2>
<p>Extracts an option value from metadata.</p>
<h3 id="usage-1"><a class="doc-anchor" href="#usage-1">§</a>Usage</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::collections::HashMap;
<span class="kw">use </span>staticdatagen::macro_metadata_option;

<span class="kw">let </span><span class="kw-2">mut </span>metadata = HashMap::new();
metadata.insert(<span class="string">"key"</span>, <span class="string">"value"</span>);
<span class="kw">let </span>value = <span class="macro">macro_metadata_option!</span>(metadata, <span class="string">"key"</span>);
<span class="macro">println!</span>(<span class="string">"{}"</span>, value);</code></pre></div>
<h3 id="arguments-1"><a class="doc-anchor" href="#arguments-1">§</a>Arguments</h3>
<ul>
<li><code>$metadata</code> - A mutable variable that represents the metadata (of type <code>HashMap&lt;String, String&gt;</code> or any other type that supports the <code>get</code> and <code>cloned</code> methods).</li>
<li><code>$key</code> - A string literal that represents the key to search for in the metadata.</li>
</ul>
<h3 id="behaviour-1"><a class="doc-anchor" href="#behaviour-1">§</a>Behaviour</h3>
<p>The <code>macro_metadata_option</code> macro is used to extract an option value from metadata. It takes a mutable variable representing the metadata and a string literal representing the key as arguments, and uses the <code>get</code> method of the metadata to find an option value with the specified key.</p>
<p>If the key exists in the metadata, the macro clones the value and returns it. If the key does not exist, it returns the default value for the type of the metadata values.</p>
<p>The macro is typically used in contexts where metadata is stored in a data structure that supports the <code>get</code> and <code>cloned</code> methods, such as a <code>HashMap&lt;String, String&gt;</code>.</p>
<h2 id="macro_render_layout-macro"><a class="doc-anchor" href="#macro_render_layout-macro">§</a><code>macro_render_layout</code> Macro</h2>
<p>This macro selects and renders a specified layout with a given context.</p>
<ul>
<li>
<p><code>$layout</code>: The desired layout name (e.g., “contact”, “index”, “page”).
If a template file corresponding to <code>$layout.html</code> exists in the template directory,
it will be used. Otherwise, the macro falls back to predefined mappings.</p>
</li>
<li>
<p><code>$template_path</code>: The path to the directory containing the template files.</p>
</li>
<li>
<p><code>$context</code>: The context to be rendered into the template.</p>
</li>
</ul>
<h3 id="behaviour-2"><a class="doc-anchor" href="#behaviour-2">§</a>Behaviour:</h3>
<ol>
<li>If a file named <code>$layout.html</code> exists in <code>$template_path</code>, it will be used as the template.</li>
<li>If no such file exists, the macro checks for predefined layout names:
<ul>
<li>“contact” maps to “contact.html”</li>
<li>“index” maps to “index.html”</li>
<li>“page” maps to “page.html”</li>
</ul>
</li>
<li>If <code>$layout</code> is unrecognized and doesn’t correspond to a file in the template directory,
the macro defaults to using “index.html”.</li>
</ol>
<h3 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns:</h3>
<p>The macro returns a rendered string using the selected template and provided context.</p>
<h2 id="macro_serve-macro"><a class="doc-anchor" href="#macro_serve-macro">§</a><code>macro_serve</code> Macro</h2>
<p>Start a server at the specified address with the given document root.</p>
<h3 id="arguments-2"><a class="doc-anchor" href="#arguments-2">§</a>Arguments</h3>
<ul>
<li><code>$server_address</code> - The address at which the server should listen, specified as an expression (<code>expr</code>).</li>
<li><code>$document_root</code> - The root directory of the documents that the server should serve, specified as an expression (<code>expr</code>).</li>
</ul>
<h3 id="behaviour-3"><a class="doc-anchor" href="#behaviour-3">§</a>Behaviour</h3>
<p>The <code>macro_serve</code> macro starts a server at the specified address with the given document root. It internally calls the <code>start</code> function from an unspecified library, passing the server address and document root as arguments.</p>
<p>If the server starts successfully, the macro returns <code>Ok(())</code>. If an error occurs during server startup, the macro will panic with the error message provided by the <code>unwrap</code> method.</p>
</div></details></section></div></main></body></html>